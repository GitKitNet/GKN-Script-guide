<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
  <head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=koi8-r">
    <meta
     name="generator"
     content=
    "HTML Tidy for Linux/x86 (vers 1st July 2002), see www.w3.org">

    <title>Упражнения</title>
    
    <meta
     name="GENERATOR"
     content="Modular DocBook HTML Stylesheet Version 1.7">
    <link
     rel="HOME"
     title="Advanced Bash-Scripting Guide"
     href="index.html">
    <link
     rel="PREVIOUS"
     title=
    "Преобразование пакетных (*.bat) файлов DOS в сценарии командной оболочки"
     href="a15138.html">
    <link
     rel="NEXT"
     title="Создание сценариев"
     href="x15542.html">
  </head>

  <body bgcolor="#DDE1C2"><b><a href="http://www.opennet.ru/docs/">Архив документации OpenNet.ru</a> / 
Раздел "<a href="http://www.opennet.ru/docs/124.shtml">Программирование, языки</a>" /
<a href="index.html">Индекс</a>
</b>
<hr noshade size=1>

    <div
     class="NAVHEADER">
      <table
       summary="Header navigation table"
       width="100%"
       border="0"
       cellpadding="0"
       cellspacing="0">
        <tr>
          <th
           colspan="3"
           align="center">Advanced Bash-Scripting Guide: Искусство
          программирования на языке сценариев командной оболочки</th>
        </tr>

        <tr>
          <td
           width="10%"
           align="left"
           valign="bottom"><a
           href="a15138.html"
           accesskey="P">Назад</a></td>

          <td
           width="80%"
           align="center"
           valign="bottom">
          </td>

          <td
           width="10%"
           align="right"
           valign="bottom"><a
           href="x15542.html"
           accesskey="N">Вперед</a></td>
        </tr>
      </table>
      <hr
       align="left"
       width="100%">
    </div>

    <div
     class="APPENDIX">
      <h1><a
       name="EXERCISES"></a>Приложение I. Упражнения</h1>

      <div
       class="SECT1">
        <h1
         class="SECT1"><a
         name="SCRIPTANALYSIS"></a>I.1. Анализ сценариев</h1>

        <p>Просмотрите следующие сценарии. Попробуйте запустить их,
        затем объясните -- что они делают. Расставьте комментарии,
        затем попробуйте записать их в более компактном виде.</p>
<pre
 class="PROGRAMLISTING">
#!/bin/bash

MAX=10000


  for((nr=1; nr&lt;$MAX; nr++))
  do

    let &quot;t1 = nr % 5&quot;
    if [ &quot;$t1&quot; -ne 3 ]
    then
      continue
    fi

    let &quot;t2 = nr % 7&quot;
    if [ &quot;$t2&quot; -ne 4 ]
    then
      continue
    fi

    let &quot;t3 = nr % 9&quot;
    if [ &quot;$t3&quot; -ne 5 ]
    then
      continue
    fi

  break   # Что произойдет, если закомментировать эту строку? Почему?

  done

  echo &quot;Число = $nr&quot;


exit 0
</pre>
        <br>
        <br>

        <p>---</p>

        <p>Читатель прислал следующий кусок кода.</p>
<pre
 class="PROGRAMLISTING">
while read LINE
do
  echo $LINE
done &lt; `tail -f /var/log/messages`
</pre>
        Он предполагал написать сценарий, который отслеживал бы
        изменения в системном журнале <tt
         class="FILENAME">/var/log/messages</tt>. К сожалению, этот код
        &quot;зависает&quot; и не делает ничего полезного. Почему?
        Найдите ошибку и исправьте ее (подсказка: вместо операции <a
         href="x11731.html#REDIRREF">перенаправления <tt
         class="FILENAME">stdin</tt> в цикл</a>, попробуйте
        использовать <a
         href="c301.html#PIPEREF">конвейерную обработку</a>).<br>
        <br>

        <p>---</p>

        <p>Просмотрите сценарий <a
         href="a14477.html#LIFESLOW">Пример A-11</a>, попробуйте
        изменить его таким образом, чтобы он выглядел проще и логичнее.
        Удалите все &quot;лишние&quot; переменные и попытайтесь
        оптимизировать сценарий по скорости исполнения.</p>

        <p>Измените сценарий таким образом, чтобы он мог принимать
        начальную установку &quot;поколения 0&quot; из любого
        текстового файла. Сценарий должен считать первые <tt
         class="VARNAME">$ROW*$COL</tt> символов, и на место гласных
        вставлять &quot;живые особи&quot;. Подсказка: не забудьте
        преобразовать пробелы в символы подчеркивания.</p>
      </div>
    </div>

    <div
     class="NAVFOOTER">
      <hr
       align="left"
       width="100%">

      <table
       summary="Footer navigation table"
       width="100%"
       border="0"
       cellpadding="0"
       cellspacing="0">
        <tr>
          <td
           width="33%"
           align="left"
           valign="top"><a
           href="a15138.html"
           accesskey="P">Назад</a></td>

          <td
           width="34%"
           align="center"
           valign="top"><a
           href="index.html"
           accesskey="H">К началу</a></td>

          <td
           width="33%"
           align="right"
           valign="top"><a
           href="x15542.html"
           accesskey="N">Вперед</a></td>
        </tr>

        <tr>
          <td
           width="33%"
           align="left"
           valign="top">Преобразование пакетных (*.bat) файлов DOS в
          сценарии командной оболочки</td>

          <td
           width="34%"
           align="center"
           valign="top"> </td>

          <td
           width="33%"
           align="right"
           valign="top">Создание сценариев</td>
        </tr>
      </table>
    </div>
  <hr noshade size=1>
<b><a href="http://www.opennet.ru/docs/">Архив документации на OpenNet.ru</a>
</body>
</html>

